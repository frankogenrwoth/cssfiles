! function(e, t) {
    "use strict";
    "function" == typeof define && define.amd ? define(t) : "object" == typeof exports ? module.exports = t() : e.baguetteBox = t()
}(this, (function() {
    "use strict";
    var e, t, n, o, i, r = {},
        s = {
            captions: !0,
            buttons: "auto",
            fullScreen: !1,
            noScrollbars: !1,
            bodyClass: "baguetteBox-open",
            titleTag: !1,
            async: !1,
            preload: 2,
            animation: "slideIn",
            afterShow: null,
            afterHide: null,
            onChange: null,
            overlayBackgroundColor: "rgba(0,0,0,.8)"
        },
        a = {},
        l = [],
        u = 0,
        c = !1,
        d = {},
        f = !1,
        h = /.+\.(gif|jpe?g|png|webp)/i,
        p = {},
        g = [],
        v = null,
        y = function(e) {
            -1 !== e.target.id.indexOf("baguette-img") && N()
        },
        m = function(e) {
            e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, T()
        },
        b = function(e) {
            e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, z()
        },
        S = function(e) {
            e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, N()
        },
        w = function(e) {
            d.count++, 1 < d.count && (d.multitouch = !0), d.startX = e.changedTouches[0].pageX, d.startY = e.changedTouches[0].pageY
        },
        x = function(e) {
            if (!f && !d.multitouch) {
                e.preventDefault ? e.preventDefault() : e.returnValue = !1;
                var t = e.touches[0] || e.changedTouches[0];
                40 < t.pageX - d.startX ? (f = !0, T()) : t.pageX - d.startX < -40 ? (f = !0, z()) : 100 < d.startY - t.pageY && N()
            }
        },
        k = function() {
            d.count--, d.count <= 0 && (d.multitouch = !1), f = !1
        },
        E = function() {
            k()
        },
        I = function(t) {
            "block" === e.style.display && e.contains && !e.contains(t.target) && (t.stopPropagation(), L())
        };

    function F(e) {
        if (p.hasOwnProperty(e)) {
            var t = p[e].galleries;
            [].forEach.call(t, (function(e) {
                [].forEach.call(e, (function(e) {
                    M(e.imageElement, "click", e.eventHandler)
                })), l === e && (l = [])
            })), delete p[e]
        }
    }

    function C(e) {
        switch (e.keyCode) {
            case 37:
                T();
                break;
            case 39:
                z();
                break;
            case 27:
                N();
                break;
            case 36:
                ! function(e) {
                    e && e.preventDefault(), A(0)
                }(e);
                break;
            case 35:
                ! function(e) {
                    e && e.preventDefault(), A(l.length - 1)
                }(e)
        }
    }

    function P(i, a) {
        if (l !== i) {
            for (l = i, function(i) {
                    for (var a in i = i || {}, s) r[a] = s[a], void 0 !== i[a] && (r[a] = i[a]);
                    t.style.transition = t.style.webkitTransition = "fadeIn" === r.animation ? "opacity .4s ease" : "slideIn" === r.animation ? "" : "none", "auto" === r.buttons && ("ontouchstart" in window || 1 === l.length) && (r.buttons = !1), n.style.display = o.style.display = r.buttons ? "" : "none";
                    try {
                        e.style.backgroundColor = r.overlayBackgroundColor
                    } catch (e) {}
                }(a); t.firstChild;) t.removeChild(t.firstChild);
            for (var u, c = [], d = [], f = g.length = 0; f < i.length; f++)(u = $("div")).className = "full-image", u.id = "baguette-img-" + f, g.push(u), c.push("baguetteBox-figure-" + f), d.push("baguetteBox-figcaption-" + f), t.appendChild(g[f]);
            e.setAttribute("aria-labelledby", c.join(" ")), e.setAttribute("aria-describedby", d.join(" "))
        }
    }

    function D(t) {
        r.noScrollbars && (document.documentElement.style.overflowY = "hidden", document.body.style.overflowY = "scroll"), "block" !== e.style.display && (W(document, "keydown", C), d = {
            count: 0,
            startX: null,
            startY: null
        }, B(u = t, (function() {
            R(u), O(u)
        })), _(), e.style.display = "block", r.fullScreen && (e.requestFullscreen ? e.requestFullscreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen() : e.mozRequestFullScreen && e.mozRequestFullScreen()), setTimeout((function() {
            e.className = "visible", r.bodyClass && document.body.classList && document.body.classList.add(r.bodyClass), r.afterShow && r.afterShow()
        }), 50), r.onChange && r.onChange(u, g.length), v = document.activeElement, L(), c = !0)
    }

    function L() {
        r.buttons ? n.focus() : i.focus()
    }

    function N() {
        r.noScrollbars && (document.documentElement.style.overflowY = "auto", document.body.style.overflowY = "auto"), "none" !== e.style.display && (M(document, "keydown", C), e.className = "", setTimeout((function() {
            e.style.display = "none", document.fullscreen && (document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen()), r.bodyClass && document.body.classList && document.body.classList.remove(r.bodyClass), r.afterHide && r.afterHide(), v && v.focus(), c = !1
        }), 500))
    }

    function B(e, t) {
        var n = g[e],
            o = l[e];
        if (void 0 !== n && void 0 !== o)
            if (n.getElementsByTagName("img")[0]) t && t();
            else {
                var i = o.imageElement,
                    s = i.getElementsByTagName("img")[0],
                    a = "function" == typeof r.captions ? r.captions.call(l, i) : i.getAttribute("data-caption") || i.title,
                    u = function(e) {
                        var t = e.href;
                        if (e.dataset) {
                            var n = [];
                            for (var o in e.dataset) "at-" !== o.substring(0, 3) || isNaN(o.substring(3)) || (n[o.replace("at-", "")] = e.dataset[o]);
                            for (var i = Object.keys(n).sort((function(e, t) {
                                    return parseInt(e, 10) < parseInt(t, 10) ? -1 : 1
                                })), r = window.innerWidth * window.devicePixelRatio, s = 0; s < i.length - 1 && i[s] < r;) s++;
                            t = n[i[s]] || t
                        }
                        return t
                    }(i),
                    c = $("figure");
                if (c.id = "baguetteBox-figure-" + e, c.innerHTML = '<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>', r.captions && a) {
                    var d = $("figcaption");
                    d.id = "baguetteBox-figcaption-" + e, d.innerHTML = a, c.appendChild(d)
                }
                n.appendChild(c);
                var f = $("img");
                f.onload = function() {
                    var n = document.querySelector("#baguette-img-" + e + " .baguetteBox-spinner");
                    c.removeChild(n), !r.async && t && t()
                }, f.setAttribute("src", u), f.alt = s && s.alt || "", r.titleTag && a && (f.title = a), c.appendChild(f), r.async && t && t()
            }
    }

    function z() {
        return A(u + 1)
    }

    function T() {
        return A(u - 1)
    }

    function A(e, t) {
        return !c && 0 <= e && e < t.length ? (P(t, r), D(e), !0) : e < 0 ? (r.animation && q("left"), !1) : e >= g.length ? (r.animation && q("right"), !1) : (B(u = e, (function() {
            R(u), O(u)
        })), _(), r.onChange && r.onChange(u, g.length), !0)
    }

    function q(e) {
        t.className = "bounce-from-" + e, setTimeout((function() {
            t.className = ""
        }), 400)
    }

    function _() {
        var e = 100 * -u + "%";
        "fadeIn" === r.animation ? (t.style.opacity = 0, setTimeout((function() {
            a.transforms ? t.style.transform = t.style.webkitTransform = "translate3d(" + e + ",0,0)" : t.style.left = e, t.style.opacity = 1
        }), 400)) : a.transforms ? t.style.transform = t.style.webkitTransform = "translate3d(" + e + ",0,0)" : t.style.left = e
    }

    function R(e) {
        e - u >= r.preload || B(e + 1, (function() {
            R(e + 1)
        }))
    }

    function O(e) {
        u - e >= r.preload || B(e - 1, (function() {
            O(e - 1)
        }))
    }

    function W(e, t, n, o) {
        e.addEventListener ? e.addEventListener(t, n, o) : e.attachEvent("on" + t, (function(e) {
            (e = e || window.event).target = e.target || e.srcElement, n(e)
        }))
    }

    function M(e, t, n, o) {
        e.removeEventListener ? e.removeEventListener(t, n, o) : e.detachEvent("on" + t, n)
    }

    function j(e) {
        return document.getElementById(e)
    }

    function $(e) {
        return document.createElement(e)
    }
    return [].forEach || (Array.prototype.forEach = function(e, t) {
        for (var n = 0; n < this.length; n++) e.call(t, this[n], n, this)
    }), [].filter || (Array.prototype.filter = function(e, t, n, o, i) {
        for (n = this, o = [], i = 0; i < n.length; i++) e.call(t, n[i], i, n) && o.push(n[i]);
        return o
    }), {
        run: function(r, s) {
            return a.transforms = function() {
                    var e = $("div");
                    return void 0 !== e.style.perspective || void 0 !== e.style.webkitPerspective
                }(), a.svg = function() {
                    var e = $("div");
                    return e.innerHTML = "<svg/>", "http://www.w3.org/2000/svg" === (e.firstChild && e.firstChild.namespaceURI)
                }(), a.passiveEvents = function() {
                    var e = !1;
                    try {
                        var t = Object.defineProperty({}, "passive", {
                            get: function() {
                                e = !0
                            }
                        });
                        window.addEventListener("test", null, t)
                    } catch (e) {}
                    return e
                }(),
                function() {
                    if (e = j("baguetteBox-overlay")) return t = j("baguetteBox-slider"), n = j("previous-button"), o = j("next-button"), void(i = j("close-button"));
                    (e = $("div")).setAttribute("role", "dialog"), e.id = "baguetteBox-overlay", document.getElementsByTagName("body")[0].appendChild(e), (t = $("div")).id = "baguetteBox-slider", e.appendChild(t), (n = $("button")).setAttribute("type", "button"), n.id = "previous-button", n.setAttribute("aria-label", "Previous"), n.innerHTML = a.svg ? '<svg width="44" height="60"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>' : "&lt;", e.appendChild(n), (o = $("button")).setAttribute("type", "button"), o.id = "next-button", o.setAttribute("aria-label", "Next"), o.innerHTML = a.svg ? '<svg width="44" height="60"><polyline points="14 10 34 30 14 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>' : "&gt;", e.appendChild(o), (i = $("button")).setAttribute("type", "button"), i.id = "close-button", i.setAttribute("aria-label", "Close"), i.innerHTML = a.svg ? '<svg width="30" height="30"><g stroke="rgb(160,160,160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/></g></svg>' : "&times;", e.appendChild(i), n.className = o.className = i.className = "baguetteBox-button",
                        function() {
                            var r = a.passiveEvents ? {
                                    passive: !1
                                } : null,
                                s = a.passiveEvents ? {
                                    passive: !0
                                } : null;
                            W(e, "click", y), W(n, "click", m), W(o, "click", b), W(i, "click", S), W(t, "contextmenu", E), W(e, "touchstart", w, s), W(e, "touchmove", x, r), W(e, "touchend", k), W(document, "focus", I, !0)
                        }()
                }(), F(r),
                function(e, t) {
                    var n = document.querySelectorAll(e),
                        o = {
                            galleries: [],
                            nodeList: n
                        };
                    return p[e] = o, [].forEach.call(n, (function(e) {
                        t && t.filter && (h = t.filter);
                        var n = [];
                        if (n = "A" === e.tagName ? [e] : e.getElementsByTagName("a"), 0 !== (n = [].filter.call(n, (function(e) {
                                if (-1 === e.className.indexOf(t && t.ignoreClass)) return h.test(e.href)
                            }))).length) {
                            var i = [];
                            [].forEach.call(n, (function(e, n) {
                                var o = function(e) {
                                        e.preventDefault ? e.preventDefault() : e.returnValue = !1, P(i, t), D(n)
                                    },
                                    r = {
                                        eventHandler: o,
                                        imageElement: e
                                    };
                                W(e, "click", o), i.push(r)
                            })), o.galleries.push(i)
                        }
                    })), o.galleries
                }(r, s)
        },
        show: A,
        showNext: z,
        showPrevious: T,
        hide: N,
        destroy: function() {
            ! function() {
                var r = a.passiveEvents ? {
                        passive: !1
                    } : null,
                    s = a.passiveEvents ? {
                        passive: !0
                    } : null;
                M(e, "click", y), M(n, "click", m), M(o, "click", b), M(i, "click", S), M(t, "contextmenu", E), M(e, "touchstart", w, s), M(e, "touchmove", x, r), M(e, "touchend", k), M(document, "focus", I, !0)
            }(),
            function() {
                for (var e in p) p.hasOwnProperty(e) && F(e)
            }(), M(document, "keydown", C), document.getElementsByTagName("body")[0].removeChild(document.getElementById("baguetteBox-overlay")), p = {}, l = [], u = 0
        }
    }
})),
function(e) {
    "undefined" == typeof vanillaZoom ? e.vanillaZoom = {
        init: function(e) {
            var t = document.querySelector(e);
            if (t) {
                var n = t.querySelector(".small-preview"),
                    o = t.querySelector(".zoomed-image");
                o ? n ? (o.style.backgroundImage = "url(" + n.src + ")", n.classList.add("active"), t.addEventListener("click", (function(e) {
                    var n = e.target;
                    if (n.classList.contains("small-preview")) {
                        t.querySelectorAll(".small-preview").forEach((function(e) {
                            e.classList.remove("active")
                        })), n.classList.add("active");
                        var i = n.src;
                        o.style.backgroundImage = "url(" + i + ")"
                    }
                })), o.addEventListener("mouseenter", (function(e) {
                    this.style.backgroundSize = "250%"
                }), !1), o.addEventListener("mousemove", (function(e) {
                    var t = this.getBoundingClientRect(),
                        n = e.clientX - t.left,
                        o = e.clientY - t.top,
                        i = Math.round(100 / (t.width / n)),
                        r = Math.round(100 / (t.height / o));
                    this.style.backgroundPosition = i + "% " + r + "%"
                }), !1), o.addEventListener("mouseleave", (function(e) {
                    this.style.backgroundSize = "contain", this.style.backgroundPosition = "left center"
                }), !1)) : console.error("No preview images on page. Please make sure you are using the right markup.") : console.error("No zoomed image element. Please make sure you are using the right markup.")
            } else console.error("No container element. Please make sure you are using the right markup.")
        }
    } : console.log("Library already defined.")
}(window), document.getElementsByClassName("clean-gallery").length > 0 && baguetteBox.run(".clean-gallery", {
        animation: "slideIn"
    }), document.getElementsByClassName("clean-product").length > 0 && (window.onload = function() {
        vanillaZoom.init("#product-preview")
    }),
    function() {
        var e = function(t) {
            var n = new e.Index;
            return n.pipeline.add(e.trimmer, e.stopWordFilter, e.stemmer), t && t.call(n, n), n
        };
        e.version = "0.9.5", lunr = e, e.utils = {}, e.utils.warn = function(e) {
                return function(t) {
                    e.console && console.warn && console.warn(t)
                }
            }(this), e.utils.toString = function(e) {
                return null == e ? "" : e.toString()
            }, e.EventEmitter = function() {
                this.events = {}
            }, e.EventEmitter.prototype.addListener = function() {
                var e = Array.prototype.slice.call(arguments),
                    t = e.pop(),
                    n = e;
                if ("function" != typeof t) throw new TypeError("last argument must be a function");
                n.forEach((function(e) {
                    this.hasHandler(e) || (this.events[e] = []), this.events[e].push(t)
                }), this)
            }, e.EventEmitter.prototype.removeListener = function(e, t) {
                if (this.hasHandler(e)) {
                    var n = this.events[e].indexOf(t); - 1 !== n && (this.events[e].splice(n, 1), 0 == this.events[e].length && delete this.events[e])
                }
            }, e.EventEmitter.prototype.emit = function(e) {
                if (this.hasHandler(e)) {
                    var t = Array.prototype.slice.call(arguments, 1);
                    this.events[e].forEach((function(e) {
                        e.apply(void 0, t)
                    }), this)
                }
            }, e.EventEmitter.prototype.hasHandler = function(e) {
                return e in this.events
            }, e.tokenizer = function(t) {
                if (!arguments.length || null == t) return [];
                if (Array.isArray(t)) {
                    var n = t.filter((function(e) {
                        return null != e
                    }));
                    n = n.map((function(t) {
                        return e.utils.toString(t).toLowerCase()
                    }));
                    var o = [];
                    return n.forEach((function(t) {
                        var n = t.split(e.tokenizer.seperator);
                        o = o.concat(n)
                    }), this), o
                }
                return t.toString().trim().toLowerCase().split(e.tokenizer.seperator)
            }, e.tokenizer.defaultSeperator = /[\s\-]+/, e.tokenizer.seperator = e.tokenizer.defaultSeperator, e.tokenizer.setSeperator = function(t) {
                null != t && "object" == typeof t && (e.tokenizer.seperator = t)
            }, e.tokenizer.resetSeperator = function() {
                e.tokenizer.seperator = e.tokenizer.defaultSeperator
            }, e.tokenizer.getSeperator = function() {
                return e.tokenizer.seperator
            }, e.Pipeline = function() {
                this._queue = []
            }, e.Pipeline.registeredFunctions = {}, e.Pipeline.registerFunction = function(t, n) {
                n in e.Pipeline.registeredFunctions && e.utils.warn("Overwriting existing registered function: " + n), t.label = n, e.Pipeline.registeredFunctions[n] = t
            }, e.Pipeline.getRegisteredFunction = function(t) {
                return t in e.Pipeline.registeredFunctions != 1 ? null : e.Pipeline.registeredFunctions[t]
            }, e.Pipeline.warnIfFunctionNotRegistered = function(t) {
                t.label && t.label in this.registeredFunctions || e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n", t)
            }, e.Pipeline.load = function(t) {
                var n = new e.Pipeline;
                return t.forEach((function(t) {
                    var o = e.Pipeline.getRegisteredFunction(t);
                    if (!o) throw new Error("Cannot load un-registered function: " + t);
                    n.add(o)
                })), n
            }, e.Pipeline.prototype.add = function() {
                var t = Array.prototype.slice.call(arguments);
                t.forEach((function(t) {
                    e.Pipeline.warnIfFunctionNotRegistered(t), this._queue.push(t)
                }), this)
            }, e.Pipeline.prototype.after = function(t, n) {
                e.Pipeline.warnIfFunctionNotRegistered(n);
                var o = this._queue.indexOf(t);
                if (-1 === o) throw new Error("Cannot find existingFn");
                this._queue.splice(o + 1, 0, n)
            }, e.Pipeline.prototype.before = function(t, n) {
                e.Pipeline.warnIfFunctionNotRegistered(n);
                var o = this._queue.indexOf(t);
                if (-1 === o) throw new Error("Cannot find existingFn");
                this._queue.splice(o, 0, n)
            }, e.Pipeline.prototype.remove = function(e) {
                var t = this._queue.indexOf(e); - 1 !== t && this._queue.splice(t, 1)
            }, e.Pipeline.prototype.run = function(e) {
                for (var t = [], n = e.length, o = this._queue.length, i = 0; n > i; i++) {
                    for (var r = e[i], s = 0; o > s && null != (r = this._queue[s](r, i, e)); s++);
                    null != r && t.push(r)
                }
                return t
            }, e.Pipeline.prototype.reset = function() {
                this._queue = []
            }, e.Pipeline.prototype.get = function() {
                return this._queue
            }, e.Pipeline.prototype.toJSON = function() {
                return this._queue.map((function(t) {
                    return e.Pipeline.warnIfFunctionNotRegistered(t), t.label
                }))
            }, e.Index = function() {
                this._fields = [], this._ref = "id", this.pipeline = new e.Pipeline, this.documentStore = new e.DocumentStore, this.index = {}, this.eventEmitter = new e.EventEmitter, this._idfCache = {}, this.on("add", "remove", "update", function() {
                    this._idfCache = {}
                }.bind(this))
            }, e.Index.prototype.on = function() {
                var e = Array.prototype.slice.call(arguments);
                return this.eventEmitter.addListener.apply(this.eventEmitter, e)
            }, e.Index.prototype.off = function(e, t) {
                return this.eventEmitter.removeListener(e, t)
            }, e.Index.load = function(t) {
                t.version !== e.version && e.utils.warn("version mismatch: current " + e.version + " importing " + t.version);
                var n = new this;
                for (var o in n._fields = t.fields, n._ref = t.ref, n.documentStore = e.DocumentStore.load(t.documentStore), n.pipeline = e.Pipeline.load(t.pipeline), n.index = {}, t.index) n.index[o] = e.InvertedIndex.load(t.index[o]);
                return n
            }, e.Index.prototype.addField = function(t) {
                return this._fields.push(t), this.index[t] = new e.InvertedIndex, this
            }, e.Index.prototype.setRef = function(e) {
                return this._ref = e, this
            }, e.Index.prototype.saveDocument = function(t) {
                return this.documentStore = new e.DocumentStore(t), this
            }, e.Index.prototype.addDoc = function(t, n) {
                if (t) {
                    n = void 0 === n || n;
                    var o = t[this._ref];
                    this.documentStore.addDoc(o, t), this._fields.forEach((function(n) {
                        var i = this.pipeline.run(e.tokenizer(t[n]));
                        this.documentStore.addFieldLength(o, n, i.length);
                        var r = {};
                        for (var s in i.forEach((function(e) {
                                e in r ? r[e] += 1 : r[e] = 1
                            }), this), r) {
                            var a = r[s];
                            a = Math.sqrt(a), this.index[n].addToken(s, {
                                ref: o,
                                tf: a
                            })
                        }
                    }), this), n && this.eventEmitter.emit("add", t, this)
                }
            }, e.Index.prototype.removeDocByRef = function(e) {
                if (e && !1 !== this.documentStore.isDocStored() && this.documentStore.hasDoc(e)) {
                    var t = this.documentStore.getDoc(e);
                    this.removeDoc(t, !1)
                }
            }, e.Index.prototype.removeDoc = function(t, n) {
                if (t) {
                    n = void 0 === n || n;
                    var o = t[this._ref];
                    this.documentStore.hasDoc(o) && (this.documentStore.removeDoc(o), this._fields.forEach((function(n) {
                        this.pipeline.run(e.tokenizer(t[n])).forEach((function(e) {
                            this.index[n].removeToken(e, o)
                        }), this)
                    }), this), n && this.eventEmitter.emit("remove", t, this))
                }
            }, e.Index.prototype.updateDoc = function(e, t) {
                t = void 0 === t || t;
                this.removeDocByRef(e[this._ref], !1), this.addDoc(e, !1), t && this.eventEmitter.emit("update", e, this)
            }, e.Index.prototype.idf = function(e, t) {
                var n = "@" + t + "/" + e;
                if (Object.prototype.hasOwnProperty.call(this._idfCache, n)) return this._idfCache[n];
                var o = this.index[t].getDocFreq(e),
                    i = 1 + Math.log(this.documentStore.length / (o + 1));
                return this._idfCache[n] = i, i
            }, e.Index.prototype.getFields = function() {
                return this._fields.slice()
            }, e.Index.prototype.search = function(t, n) {
                if (!t) return [];
                var o = null;
                null != n && (o = JSON.stringify(n));
                var i = new e.Configuration(o, this.getFields()).get(),
                    r = this.pipeline.run(e.tokenizer(t)),
                    s = {};
                for (var a in i) {
                    var l = this.fieldSearch(r, a, i),
                        u = i[a].boost;
                    for (var c in l) l[c] = l[c] * u;
                    for (var c in l) c in s ? s[c] += l[c] : s[c] = l[c]
                }
                var d = [];
                for (var c in s) d.push({
                    ref: c,
                    score: s[c]
                });
                return d.sort((function(e, t) {
                    return t.score - e.score
                })), d
            }, e.Index.prototype.fieldSearch = function(e, t, n) {
                var o = n[t].bool,
                    i = n[t].expand,
                    r = n[t].boost,
                    s = null,
                    a = {};
                return 0 !== r ? (e.forEach((function(e) {
                    var n = [e];
                    1 == i && (n = this.index[t].expandToken(e));
                    var r = {};
                    n.forEach((function(n) {
                        var i = this.index[t].getDocs(n),
                            l = this.idf(n, t);
                        if (s && "AND" == o) {
                            var u = {};
                            for (var c in s) c in i && (u[c] = i[c]);
                            i = u
                        }
                        for (var c in n == e && this.fieldSearchStats(a, n, i), i) {
                            var d = this.index[t].getTermFrequency(n, c),
                                f = this.documentStore.getFieldLength(c, t),
                                h = 1;
                            0 != f && (h = 1 / Math.sqrt(f));
                            var p = 1;
                            n != e && (p = .15 * (1 - (n.length - e.length) / n.length));
                            var g = d * l * h * p;
                            c in r ? r[c] += g : r[c] = g
                        }
                    }), this), s = this.mergeScores(s, r, o)
                }), this), s = this.coordNorm(s, a, e.length)) : void 0
            }, e.Index.prototype.mergeScores = function(e, t, n) {
                if (!e) return t;
                if ("AND" == n) {
                    var o = {};
                    for (var i in t) i in e && (o[i] = e[i] + t[i]);
                    return o
                }
                for (var i in t) i in e ? e[i] += t[i] : e[i] = t[i];
                return e
            }, e.Index.prototype.fieldSearchStats = function(e, t, n) {
                for (var o in n) o in e ? e[o].push(t) : e[o] = [t]
            }, e.Index.prototype.coordNorm = function(e, t, n) {
                for (var o in e)
                    if (o in t) {
                        var i = t[o].length;
                        e[o] = e[o] * i / n
                    } return e
            }, e.Index.prototype.toJSON = function() {
                var t = {};
                return this._fields.forEach((function(e) {
                    t[e] = this.index[e].toJSON()
                }), this), {
                    version: e.version,
                    fields: this._fields,
                    ref: this._ref,
                    documentStore: this.documentStore.toJSON(),
                    index: t,
                    pipeline: this.pipeline.toJSON()
                }
            }, e.Index.prototype.use = function(e) {
                var t = Array.prototype.slice.call(arguments, 1);
                t.unshift(this), e.apply(this, t)
            }, e.DocumentStore = function(e) {
                this._save = null == e || e, this.docs = {}, this.docInfo = {}, this.length = 0
            }, e.DocumentStore.load = function(e) {
                var t = new this;
                return t.length = e.length, t.docs = e.docs, t.docInfo = e.docInfo, t._save = e.save, t
            }, e.DocumentStore.prototype.isDocStored = function() {
                return this._save
            }, e.DocumentStore.prototype.addDoc = function(e, t) {
                this.hasDoc(e) || this.length++, this.docs[e] = !0 === this._save ? function(e) {
                    if (null === e || "object" != typeof e) return e;
                    var t = e.constructor();
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
                    return t
                }(t) : null
            }, e.DocumentStore.prototype.getDoc = function(e) {
                return !1 === this.hasDoc(e) ? null : this.docs[e]
            }, e.DocumentStore.prototype.hasDoc = function(e) {
                return e in this.docs
            }, e.DocumentStore.prototype.removeDoc = function(e) {
                this.hasDoc(e) && (delete this.docs[e], delete this.docInfo[e], this.length--)
            }, e.DocumentStore.prototype.addFieldLength = function(e, t, n) {
                null != e && 0 != this.hasDoc(e) && (this.docInfo[e] || (this.docInfo[e] = {}), this.docInfo[e][t] = n)
            }, e.DocumentStore.prototype.updateFieldLength = function(e, t, n) {
                null != e && 0 != this.hasDoc(e) && this.addFieldLength(e, t, n)
            }, e.DocumentStore.prototype.getFieldLength = function(e, t) {
                return null == e ? 0 : e in this.docs && t in this.docInfo[e] ? this.docInfo[e][t] : 0
            }, e.DocumentStore.prototype.toJSON = function() {
                return {
                    docs: this.docs,
                    docInfo: this.docInfo,
                    length: this.length,
                    save: this._save
                }
            }, e.stemmer = function() {
                var e = {
                        ational: "ate",
                        tional: "tion",
                        enci: "ence",
                        anci: "ance",
                        izer: "ize",
                        bli: "ble",
                        alli: "al",
                        entli: "ent",
                        eli: "e",
                        ousli: "ous",
                        ization: "ize",
                        ation: "ate",
                        ator: "ate",
                        alism: "al",
                        iveness: "ive",
                        fulness: "ful",
                        ousness: "ous",
                        aliti: "al",
                        iviti: "ive",
                        biliti: "ble",
                        logi: "log"
                    },
                    t = {
                        icate: "ic",
                        ative: "",
                        alize: "al",
                        iciti: "ic",
                        ical: "ic",
                        ful: "",
                        ness: ""
                    },
                    n = "[aeiouy]",
                    o = "[^aeiou][^aeiouy]*",
                    i = new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),
                    r = new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),
                    s = new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),
                    a = new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),
                    l = /^(.+?)(ss|i)es$/,
                    u = /^(.+?)([^s])s$/,
                    c = /^(.+?)eed$/,
                    d = /^(.+?)(ed|ing)$/,
                    f = /.$/,
                    h = /(at|bl|iz)$/,
                    p = new RegExp("([^aeiouylsz])\\1$"),
                    g = new RegExp("^" + o + n + "[^aeiouwxy]$"),
                    v = /^(.+?[^aeiou])y$/,
                    y = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,
                    m = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,
                    b = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,
                    S = /^(.+?)(s|t)(ion)$/,
                    w = /^(.+?)e$/,
                    x = /ll$/,
                    k = new RegExp("^" + o + n + "[^aeiouwxy]$");
                return function(n) {
                    var o, E, I, F, C, P, D;
                    if (n.length < 3) return n;
                    if ("y" == (I = n.substr(0, 1)) && (n = I.toUpperCase() + n.substr(1)), C = u, (F = l).test(n) ? n = n.replace(F, "$1$2") : C.test(n) && (n = n.replace(C, "$1$2")), C = d, (F = c).test(n)) {
                        var L = F.exec(n);
                        (F = i).test(L[1]) && (F = f, n = n.replace(F, ""))
                    } else if (C.test(n)) {
                        o = (L = C.exec(n))[1], (C = a).test(o) && (P = p, D = g, (C = h).test(n = o) ? n += "e" : P.test(n) ? (F = f, n = n.replace(F, "")) : D.test(n) && (n += "e"))
                    }(F = v).test(n) && (n = (o = (L = F.exec(n))[1]) + "i");
                    (F = y).test(n) && (o = (L = F.exec(n))[1], E = L[2], (F = i).test(o) && (n = o + e[E]));
                    (F = m).test(n) && (o = (L = F.exec(n))[1], E = L[2], (F = i).test(o) && (n = o + t[E]));
                    if (C = S, (F = b).test(n)) o = (L = F.exec(n))[1], (F = r).test(o) && (n = o);
                    else if (C.test(n)) {
                        o = (L = C.exec(n))[1] + L[2], (C = r).test(o) && (n = o)
                    }(F = w).test(n) && (o = (L = F.exec(n))[1], C = s, P = k, ((F = r).test(o) || C.test(o) && !P.test(o)) && (n = o));
                    return C = r, (F = x).test(n) && C.test(n) && (F = f, n = n.replace(F, "")), "y" == I && (n = I.toLowerCase() + n.substr(1)), n
                }
            }(), e.Pipeline.registerFunction(e.stemmer, "stemmer"), e.stopWordFilter = function(t) {
                return t && !0 !== e.stopWordFilter.stopWords[t] ? t : void 0
            }, e.clearStopWords = function() {
                e.stopWordFilter.stopWords = {}
            }, e.addStopWords = function(t) {
                null != t && !1 !== Array.isArray(t) && t.forEach((function(t) {
                    e.stopWordFilter.stopWords[t] = !0
                }), this)
            }, e.resetStopWords = function() {
                e.stopWordFilter.stopWords = e.defaultStopWords
            }, e.defaultStopWords = {
                "": !0,
                a: !0,
                able: !0,
                about: !0,
                across: !0,
                after: !0,
                all: !0,
                almost: !0,
                also: !0,
                am: !0,
                among: !0,
                an: !0,
                and: !0,
                any: !0,
                are: !0,
                as: !0,
                at: !0,
                be: !0,
                because: !0,
                been: !0,
                but: !0,
                by: !0,
                can: !0,
                cannot: !0,
                could: !0,
                dear: !0,
                did: !0,
                do: !0,
                does: !0,
                either: !0,
                else: !0,
                ever: !0,
                every: !0,
                for: !0,
                from: !0,
                get: !0,
                got: !0,
                had: !0,
                has: !0,
                have: !0,
                he: !0,
                her: !0,
                hers: !0,
                him: !0,
                his: !0,
                how: !0,
                however: !0,
                i: !0,
                if: !0,
                in: !0,
                into: !0,
                is: !0,
                it: !0,
                its: !0,
                just: !0,
                least: !0,
                let: !0,
                like: !0,
                likely: !0,
                may: !0,
                me: !0,
                might: !0,
                most: !0,
                must: !0,
                my: !0,
                neither: !0,
                no: !0,
                nor: !0,
                not: !0,
                of: !0,
                off: !0,
                often: !0,
                on: !0,
                only: !0,
                or: !0,
                other: !0,
                our: !0,
                own: !0,
                rather: !0,
                said: !0,
                say: !0,
                says: !0,
                she: !0,
                should: !0,
                since: !0,
                so: !0,
                some: !0,
                than: !0,
                that: !0,
                the: !0,
                their: !0,
                them: !0,
                then: !0,
                there: !0,
                these: !0,
                they: !0,
                this: !0,
                tis: !0,
                to: !0,
                too: !0,
                twas: !0,
                us: !0,
                wants: !0,
                was: !0,
                we: !0,
                were: !0,
                what: !0,
                when: !0,
                where: !0,
                which: !0,
                while: !0,
                who: !0,
                whom: !0,
                why: !0,
                will: !0,
                with: !0,
                would: !0,
                yet: !0,
                you: !0,
                your: !0
            }, e.stopWordFilter.stopWords = e.defaultStopWords, e.Pipeline.registerFunction(e.stopWordFilter, "stopWordFilter"), e.trimmer = function(e) {
                if (null == e) throw new Error("token should not be undefined");
                return e.replace(/^\W+/, "").replace(/\W+$/, "")
            }, e.Pipeline.registerFunction(e.trimmer, "trimmer"), e.InvertedIndex = function() {
                this.root = {
                    docs: {},
                    df: 0
                }
            }, e.InvertedIndex.load = function(e) {
                var t = new this;
                return t.root = e.root, t
            }, e.InvertedIndex.prototype.addToken = function(e, t, n) {
                n = n || this.root;
                for (var o = 0; o <= e.length - 1;) {
                    var i = e[o];
                    i in n || (n[i] = {
                        docs: {},
                        df: 0
                    }), o += 1, n = n[i]
                }
                var r = t.ref;
                n.docs[r] ? n.docs[r] = {
                    tf: t.tf
                } : (n.docs[r] = {
                    tf: t.tf
                }, n.df += 1)
            }, e.InvertedIndex.prototype.hasToken = function(e) {
                if (!e) return !1;
                for (var t = this.root, n = 0; n < e.length; n++) {
                    if (!t[e[n]]) return !1;
                    t = t[e[n]]
                }
                return !0
            }, e.InvertedIndex.prototype.getNode = function(e) {
                if (!e) return null;
                for (var t = this.root, n = 0; n < e.length; n++) {
                    if (!t[e[n]]) return null;
                    t = t[e[n]]
                }
                return t
            }, e.InvertedIndex.prototype.getDocs = function(e) {
                var t = this.getNode(e);
                return null == t ? {} : t.docs
            }, e.InvertedIndex.prototype.getTermFrequency = function(e, t) {
                var n = this.getNode(e);
                return null == n ? 0 : t in n.docs ? n.docs[t].tf : 0
            }, e.InvertedIndex.prototype.getDocFreq = function(e) {
                var t = this.getNode(e);
                return null == t ? 0 : t.df
            }, e.InvertedIndex.prototype.removeToken = function(e, t) {
                if (e) {
                    var n = this.getNode(e);
                    null != n && t in n.docs && (delete n.docs[t], n.df -= 1)
                }
            }, e.InvertedIndex.prototype.expandToken = function(e, t, n) {
                if (null == e || "" == e) return [];
                t = t || [];
                if (null == n && null == (n = this.getNode(e))) return t;
                for (var o in n.df > 0 && t.push(e), n) "docs" !== o && "df" !== o && this.expandToken(e + o, t, n[o]);
                return t
            }, e.InvertedIndex.prototype.toJSON = function() {
                return {
                    root: this.root
                }
            }, e.Configuration = function(t, n) {
                var o;
                t = t || "";
                if (null == n || null == n) throw new Error("fields should not be null");
                this.config = {};
                try {
                    o = JSON.parse(t), this.buildUserConfig(o, n)
                } catch (t) {
                    e.utils.warn("user configuration parse failed, will use default configuration"), this.buildDefaultConfig(n)
                }
            }, e.Configuration.prototype.buildDefaultConfig = function(e) {
                this.reset(), e.forEach((function(e) {
                    this.config[e] = {
                        boost: 1,
                        bool: "OR",
                        expand: !1
                    }
                }), this)
            }, e.Configuration.prototype.buildUserConfig = function(t, n) {
                var o = "OR",
                    i = !1;
                if (this.reset(), "bool" in t && (o = t.bool || o), "expand" in t && (i = t.expand || i), "fields" in t)
                    for (var r in t.fields)
                        if (n.indexOf(r) > -1) {
                            var s = t.fields[r],
                                a = i;
                            null != s.expand && (a = s.expand), this.config[r] = {
                                boost: s.boost || 0 === s.boost ? s.boost : 1,
                                bool: s.bool || o,
                                expand: a
                            }
                        } else e.utils.warn("field name in user configuration not found in index instance fields");
                else this.addAllFields2UserConfig(o, i, n)
            }, e.Configuration.prototype.addAllFields2UserConfig = function(e, t, n) {
                n.forEach((function(n) {
                    this.config[n] = {
                        boost: 1,
                        bool: e,
                        expand: t
                    }
                }), this)
            }, e.Configuration.prototype.get = function() {
                return this.config
            }, e.Configuration.prototype.reset = function() {
                this.config = {}
            }, lunr.SortedSet = function() {
                this.length = 0, this.elements = []
            }, lunr.SortedSet.load = function(e) {
                var t = new this;
                return t.elements = e, t.length = e.length, t
            }, lunr.SortedSet.prototype.add = function() {
                var e, t;
                for (e = 0; e < arguments.length; e++) t = arguments[e], ~this.indexOf(t) || this.elements.splice(this.locationFor(t), 0, t);
                this.length = this.elements.length
            }, lunr.SortedSet.prototype.toArray = function() {
                return this.elements.slice()
            }, lunr.SortedSet.prototype.map = function(e, t) {
                return this.elements.map(e, t)
            }, lunr.SortedSet.prototype.forEach = function(e, t) {
                return this.elements.forEach(e, t)
            }, lunr.SortedSet.prototype.indexOf = function(e) {
                for (var t = 0, n = this.elements.length, o = n - t, i = t + Math.floor(o / 2), r = this.elements[i]; o > 1;) {
                    if (r === e) return i;
                    e > r && (t = i), r > e && (n = i), o = n - t, i = t + Math.floor(o / 2), r = this.elements[i]
                }
                return r === e ? i : -1
            }, lunr.SortedSet.prototype.locationFor = function(e) {
                for (var t = 0, n = this.elements.length, o = n - t, i = t + Math.floor(o / 2), r = this.elements[i]; o > 1;) e > r && (t = i), r > e && (n = i), o = n - t, i = t + Math.floor(o / 2), r = this.elements[i];
                return r > e ? i : e > r ? i + 1 : void 0
            }, lunr.SortedSet.prototype.intersect = function(e) {
                for (var t = new lunr.SortedSet, n = 0, o = 0, i = this.length, r = e.length, s = this.elements, a = e.elements; !(n > i - 1 || o > r - 1);) s[n] !== a[o] ? s[n] < a[o] ? n++ : s[n] > a[o] && o++ : (t.add(s[n]), n++, o++);
                return t
            }, lunr.SortedSet.prototype.clone = function() {
                var e = new lunr.SortedSet;
                return e.elements = this.toArray(), e.length = e.elements.length, e
            }, lunr.SortedSet.prototype.union = function(e) {
                var t, n, o;
                this.length >= e.length ? (t = this, n = e) : (t = e, n = this), o = t.clone();
                for (var i = 0, r = n.toArray(); i < r.length; i++) o.add(r[i]);
                return o
            }, lunr.SortedSet.prototype.toJSON = function() {
                return this.toArray()
            },
            function(e, t) {
                "function" == typeof define && define.amd ? define(t) : "object" == typeof exports ? module.exports = t() : e.elasticlunr = t()
            }(this, (function() {
                return e
            }))
    }();
var suggestions = [];
const inputField = document.querySelector("#searchField"),
    suggestionList = document.querySelector("#searchSuggestion"),
    inputFieldPc = document.querySelector("#searchFieldPc"),
    suggestionListPc = document.querySelector("#searchSuggestionPc"),
    searchForm = document.querySelector("#searchForm"),
    searchFormPc = document.querySelector("#searchFormPc");

function listener(e, t) {
    e.onkeyup = function() {
        let n = [],
            o = e.value,
            i = e.value;
        " " === i.charAt(i.length - 1) && updateSuggestions(i, t), o.length && (n = suggestions.filter((e => e.toLowerCase().includes(o.toLowerCase())))), display(n, e, t), n.length ? t.style = "display: block-inline;" : t.style = "display: none;"
    }
}

function display(e, t, n) {
    const o = e.slice(0,15).map((e => "<li onclick=selectInput(this)>" + e.toLowerCase().replace(t.value.toLowerCase(), "<strong>" + t.value.toLowerCase() + "</strong>") + "</li>"));
    n.innerHTML = o.join("")
}

function selectInput(e) {
    let t = e.innerHTML.replace("<strong>", "");
    inputField.value.length ? (inputField.value = t.replace("</strong>", ""), suggestionList.style = "display:none;") : (inputFieldPc.value = t.replace("</strong>", ""), suggestionListPc.style = "display:none;")
}
"" === suggestionList.innerHTML && (suggestionList.style = "display: none;"), "" === suggestionListPc.innerHTML && (suggestionListPc.style = "display: none;"), listener(inputField, suggestionList), listener(inputFieldPc, suggestionListPc);
var index = elasticlunr((function() {
        this.addField("id"), this.addField("content")
    })),
    doc1 = {
        id: 2,
        content: "Oracle released its latest database Oracle 12g"
    },
    doc2 = {
        id: 1,
        content: "mongoDb released its profit report of 2015"
    };

function updateSuggestions(e, t) {
    result = index.search(e);
    let content = result.map(val => {
        console.log(index.documentStore.getDoc(val.ref).content);
        return suggestions[val.ref];
    });
}
let engineData = [];

searchFormPc.addEventListener("submit", (function(e) {
    e.preventDefault();
    var t = searchFormPc.searchFieldPc.value;

    result = index.search(t);
    let content = result.map(val => {
        return index.documentStore.getDoc(val.ref).id;
    });

    searchFormPc.qs.value = content;
    searchFormPc.submit();
}));

searchForm.addEventListener("submit", (function(e) {
    e.preventDefault();

    var t = searchForm.searchField.value;

    result = index.search(t);
    let content = result.map(val => {
        return index.documentStore.getDoc(val.ref).id;
    });

    searchForm.qs.value = content;
    searchForm.submit();
}));


var data = fetch("http://localhost:8000/search01294.json")
  .then((response) => response.json())
  .then((e) => {
    suggestions = e.map((val) => val.content);
    engineData = e;
    engineData.forEach((val) => {
        index.addDoc(val);
    })
  });

